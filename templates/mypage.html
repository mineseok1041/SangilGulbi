<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/mypage.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/header.css') }}">
    <title>mypage</title>
</head>

<body>
    <header class="header">
        <a class="header_logo" href="/">
            <img src="{{ url_for('static', filename='img/logo.png') }}" alt="GB">
        </a>
        <h1 id="mypage">MyPage</h1>
        <article class="game">
            <a href="#">
                <h6 class="text">game</h6>
            </a>
            <article class="menubar">
                <button class="game1" href="#">
                    <p>사다리타기</p>
                </button>
                <button class="game2" href="#">
                    <p>룰렛 돌리기</p>
                </button>
            </article>
        </article>
        <article class="awards">
            <a href="/awards">
                <h6 class="text">awards</h6>
            </a>
        </article>
        <article class="save">
            <a href="#">
                <h6 class="text">save</h6>
            </a>
        </article>
        <article class="cal">
            <a href="#">
                <h6 class="text">calendar</h6>
            </a>
            <article class="menubar">
                <button class="cal1" href="#">
                    <p>공지사항</p>
                </button>
                <button class="cal2" href="#">
                    <p>캘린더보기</p>
                </button>
            </article>
        </article>
        {% if session['id'] %}
            <button class="logout" onClick="location.href='/student/logout.do'">LOGOUT</button>
        {% else %}
            <button class="login-button" onClick="location.href='/login'">LOGIN</button>
        {% endif %}
    </header>

    <div id="photo">
        <img id="basic" src="{{ url_for('static', filename='uploads/' + (session.get('profile_pic') or 'default.jpg')) }}">
        <form id="uploadForm" action="{{ url_for('upload.upload_profile_pic') }}" method="POST" enctype="multipart/form-data">
            <input type="file" id="fileInput" name="file" accept="image/*" style="display: none;" onchange="previewImage(event)">
            <button type="button" id="upload" onclick="document.getElementById('fileInput').click();">사진 업로드</button>
        </form>
        <p id="text">800x800 크기의 JPG 또는 PNG 형식의 파일을 넣어주세요</p>
    </div>
    <hr id="line">
    <article class="information_box">
        <h3 id="info">사용자 정보</h3>
        <p id="num">학번: {{ user.firststdnum }}</p>
        <p id="name">이름: {{ user.name }}</p>
        <p id="phone">전화번호: {{ user.phone }}</p>
        <p id="e-mail">이메일: {{ user.email }}</p>
        <button class="add" onclick="openPopup()">수정</button>
    </article>
    <article class="score_box">
        <h3 id="score">상벌점</h3>
    </article>
    <article class="awards_box">
        <h3 id="awards">수상내역</h3>
    </article>

    <script>
        function previewImage(event) {
            const reader = new FileReader();
            reader.onload = function() {
                const output = document.getElementById('basic');
                output.src = reader.result;
            };
            reader.readAsDataURL(event.target.files[0]);
            document.getElementById('uploadForm').submit();
        }
    </script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/mypage.js') }}"></script>
</body>

</html>